manifest {
  name        = 'alternative_splicing_nf'
  author      = 'pipeline-scaffold'
  description = 'Backbone Nextflow pipeline for alternative splicing analyses'
  mainScript  = 'main.nf'
}

params {
  samples      = 'metadata/samples.tsv'
  gtf          = null
  fasta        = null
  strandedness = 'fr-unstranded'
  outdir       = 'results'
  bam_dir      = 'resources/bam'
  stringtie_dir= 'resources/stringtie'
  raw_dir      = 'results/raw'
  fastp_dir    = 'results/fastp'
  star_index_base = 'resources/star_index'
  threads      = 8
}

process {
  executor        = 'local'
  cpus            = params.threads
  withName:REGTOOLS_JUNCTIONS { errorStrategy = 'retry'; maxRetries = 1 }
  withName:STRINGTIE_ASSEMBLE { maxForks = 2; cpus = params.threads }
  withName:FASTP { cpus = params.threads }
  withName:STAR_ALIGN { cpus = params.threads }
  withName:STAR_INDEX { cpus = params.threads }
}

timeline {
  enabled = true
  file    = "${params.outdir}/logs/timeline.html"
}

trace {
  enabled = true
  file    = "${params.outdir}/logs/trace.txt"
}

profiles {
  local {
    process.executor = 'local'
  }
}
